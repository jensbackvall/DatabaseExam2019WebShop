<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>KEA webshop</title>
    <script src="https://code.jquery.com/jquery-3.3.1.js" type="text/javascript"></script>
    <script src="../index/index.js"></script>
    <link rel="stylesheet" type="text/css" href="../index/index.css" />
    <link rel="stylesheet" type="text/css" href="../main.css" />
</head>
<body>
    <header>
        <div class="logo">
            <img src="./images/logo.png" alt="logo">
        </div>
        <div class="mid-header">
            
        </div>
        <div class="loginregister">
            <button class="gotologinbutton" onclick="window.location.href = '../login/login.html';">LOG IN</button>
            <button class="gotoregisterbutton" onclick="window.location.href = '../register/register.html';">REGISTER NEW USER</button>
            <br><br><br>
            <a class="cart" href="../shopping-basket/shoppingbasket.html"><img src="../images/cart.png" alt="cart"></a>
        </div>
    </header>
    <main>
        <div class="welcome-banner">
            What an Incredible Webshop you've discovered!
        </div>
        <div class="search-bar">
            Looking for something specific? Search here!<br><br>
            <form id="searchform">
                <span class="search-term">Title Search: </span><input type="text" class = "namesearchfield" name="namesearchfield" id="namesearchfield" placeholder="search term for product name"><br>
                <span class="search-term">Description Search: </span><input type="text" class = "descriptionsearchfield" name="descriptionsearchfield" id="descriptionsearchfield" placeholder="search term for product description"><br>
            </form>
            <button id="search-button" class="search-button" type="submit">SEARCH</button>
        </div>
        <div class="product-box__header">
            <h3>our products</h3>
        </div>
        <div class="product-box">
            <div class="product-box__products" id="products">

            </div>
        </div>
    </main>
    <footer></footer>
</body>

<script>
    // Gets a search word or string form the search field and sends it to the searchresults page
    $(".search-button" ).click(function() {
        console.log($("#namesearchfield").val());
        console.log($("#descriptionsearchfield").val());
        window.location = "http://localhost:3000/searchresults?name=" + $("#namesearchfield").val() + "&description=" + $("#descriptionsearchfield").val();
    });


    if (window.localStorage.getItem('username') != null) {
        $(".mid-header").html("Logged in as: " + window.localStorage.getItem('username') + "<br><br><button type='submit'  id='logOutButton'>Log Out</button>");    
    }

    $(`#logOutButton`).click((event) => {
        window.localStorage.removeItem("username");
        window.localStorage.removeItem("userid");
        $(".mid-header").remove(`#logOutButton`);
        location.reload(true);
    });

</script>

</html>

